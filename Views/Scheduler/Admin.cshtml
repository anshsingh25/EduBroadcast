@model IReadOnlyList<SchoolCommApp.Models.ConferenceSlot>
@{
	Layout = "~/Views/Shared/_Layout.cshtml";
	ViewData["Title"] = "Scheduler Admin";
}
<div class="row">
	<div class="col-md-6">
		<h2 class="reveal">Slots</h2>
		@await Html.PartialAsync("~/Views/Shared/_Alerts.cshtml")
		@if (Model == null || Model.Count == 0)
		{
			<div class="empty-state reveal">
				<div class="icon"><i class="bi bi-calendar2-plus"></i></div>
				<p class="mb-1">No slots yet.</p>
				<p class="sc-muted mb-0">Add new slots using the form on the right.</p>
			</div>
		}
		else
		{
			<div class="card reveal">
				<div class="table-responsive">
					<table class="table table-striped table-hover table-sm align-middle mb-0">
						<thead><tr><th>Start</th><th>End</th><th>Booked</th><th></th></tr></thead>
						<tbody>
						@foreach (var s in Model)
						{
							<tr>
								<td>@s.StartUtc.ToLocalTime()</td>
								<td>@s.EndUtc.ToLocalTime()</td>
								<td>@(s.IsBooked ? "Yes" : "No")</td>
								<td>
									<form method="post" asp-action="DeleteSlot">
										<input type="hidden" name="id" value="@s.Id" />
										<button class="btn btn-outline-danger btn-sm" @(s.IsBooked ? "disabled" : "")>Delete</button>
									</form>
								</td>
							</tr>
						}
						</tbody>
					</table>
				</div>
			</div>
		}
		<p class="mt-3 reveal"><a href="/Scheduler">Back</a></p>
	</div>
	<div class="col-md-6">
		<h3 class="reveal">Add Slot</h3>
		<form method="post" asp-action="AddSlot" class="card card-body reveal">
			<div class="mb-2">
				<label class="form-label">Start (local)</label>
				<input class="form-control" type="datetime-local" name="start" required />
			</div>
			<div class="mb-2">
				<label class="form-label">Duration (minutes)</label>
				<input class="form-control" type="number" name="minutes" value="15" min="5" max="120" />
			</div>
			<button class="btn btn-success">Add</button>
		</form>
	</div>
</div>


